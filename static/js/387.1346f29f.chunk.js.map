{"version":3,"file":"static/js/387.1346f29f.chunk.js","mappings":"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","sources":["components/Message/Message.styled.jsx","components/Message/Message.jsx","components/Reviews/Reviews.styled.jsx","components/Reviews/Reviews.jsx","hooks/useFetch.js","services/movies.service.js"],"sourcesContent":["import styled from '@emotion/styled';\nimport { colors } from 'constants';\n\nexport const MessageStyled = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n\n  & div {\n    color: #ffffffb3;\n    border-radius: 5px;\n    padding: 7px 24px 7px 24px;\n    border-left: 2px solid ${colors.color2};\n    border-right: 2px solid ${colors.color2};\n    font-size: 18px;\n    background-image: repeating-linear-gradient(\n      135deg,\n      rgb(0 0 0 / 0.01),\n      rgb(0 0 0 / 0.01) 5px,\n      rgba(255, 234, 0, 0.134) 5px,\n      rgba(255, 255, 255, 0) 10px\n    );\n  }\n`;\n","import { MessageStyled } from './Message.styled';\n\nconst Message = ({ children }) => {\n  return (\n    <MessageStyled>\n      <div>{children}</div>\n    </MessageStyled>\n  );\n};\n\nexport default Message;\n","import styled from '@emotion/styled';\n\nexport const ReviewsStyled = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n  margin-top: 30px;\n\n  & li {\n    & .author {\n      font-size: 20px;\n      font-weight: 500;\n      margin-bottom: 10px;\n      color: #fff;\n    }\n\n    & .content {\n      font-size: 16px;\n      font-weight: 400;\n      color: #ffffff97;\n      line-height: 1.6;\n      word-break: break-word;\n    }\n  }\n`;\n","import { ReviewsStyled } from './Reviews.styled';\nimport { useParams } from 'react-router-dom';\nimport { useFetchPages } from './../../hooks/useFetch';\nimport { useCallback, useState } from 'react';\nimport { getReviews } from 'services';\nimport { fetchStatus } from './../../constants/fetch.status';\nimport { Button } from './../Styled/Button.styled';\nimport Message from 'components/Message/Message';\nimport { Loader } from 'components/Styled';\n\nconst Reviews = () => {\n  const { movieId } = useParams();\n  const [page, setPage] = useState(1);\n\n  const getMovieReviews = useCallback(async () => {\n    return await getReviews({ movieId, page });\n  }, [movieId, page]);\n\n  const { data, status } = useFetchPages(getMovieReviews, page === 1);\n\n  const { results: reviews, totalPages, reachedEnd } = data;\n\n  console.log('Reviews: ', reviews);\n\n  const loadMore = () => {\n    setPage(page + 1);\n  };\n\n  return (\n    <>\n      {reviews && reviews.lenth !== 0 && (\n        <ReviewsStyled>\n          {reviews.map(({ id, author, content }, index) => (\n            <li key={index}>\n              <div className=\"author\">{author}</div>\n              <div className=\"content\">{content}</div>\n            </li>\n          ))}\n        </ReviewsStyled>\n      )}\n\n      {reviews && !reviews.lenth && (\n        <Message>We don't have any reviews for this movie</Message>\n      )}\n\n      {status === fetchStatus.LOADING && <Loader className=\"pending\" />}\n\n      {totalPages > 1 && !reachedEnd && status !== fetchStatus.LOADING && (\n        <Button type=\"button\" onClick={loadMore}>\n          Load more\n        </Button>\n      )}\n    </>\n  );\n};\n\nexport default Reviews;\n","import { fetchStatus } from 'constants';\nimport { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\n\nexport const useFetch = (callback, isInitialRequest) => {\n  const [data, setData] = useState({});\n  const [status, setStatus] = useState(fetchStatus.IDLE);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setStatus(fetchStatus.LOADING);\n      try {\n        const data = await callback();\n        setData(data);\n        setStatus(fetchStatus.SUCCESS);\n      } catch (error) {\n        toast.error(error.message);\n        setStatus(fetchStatus.ERROR);\n      }\n    };\n\n    fetchData();\n  }, [callback, isInitialRequest]);\n\n  return { data, status };\n};\n\nexport const useFetchPages = (callback, isInitialRequest) => {\n  const [data, setData] = useState({});\n  const [status, setStatus] = useState(fetchStatus.IDLE);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setStatus(fetchStatus.LOADING);\n      try {\n        const data = await callback();\n        console.log(data);\n        setData(prev =>\n          isInitialRequest\n            ? data\n            : { ...prev, results: [...prev.results, ...data.results] }\n        );\n        if (\n          data.results !== undefined &&\n          data.results.length !== 0 &&\n          data.page === 1\n        ) {\n          // toast.success(`We found ${data.total} movies`);\n        }\n        setStatus(fetchStatus.SUCCESS);\n      } catch (error) {\n        toast.error(error.message);\n        setStatus(fetchStatus.ERROR);\n      }\n    };\n\n    fetchData();\n  }, [callback, isInitialRequest]);\n\n  return { data, status };\n};\n","import axios from 'axios';\nimport { theMovieDBApiKey } from 'constants';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3/';\naxios.defaults.params = {\n  api_key: theMovieDBApiKey,\n};\n\nexport const findMoviesByQuery = async ({ query, page }) => {\n  console.log(query);\n  const { data } = await axios.get('search/movie', {\n    params: {\n      query,\n      page,\n    },\n  });\n\n  const { results, total_pages: totalPages, total_results: total } = data;\n  const reachedEnd = totalPages === page;\n\n  console.log('page: ', page);\n  console.log('totalPages: ', totalPages);\n  console.log('reachedEnd: ', reachedEnd);\n\n  return { results, totalPages, total, reachedEnd, page };\n};\n\nexport const getTrandingMovies = async ({ page, filter }) => {\n  const { data } = await axios.get(`trending/movie/${filter}`, {\n    params: {\n      page,\n    },\n  });\n\n  const { results, total_pages: totalPages, total_results: total } = data;\n  const reachedEnd = totalPages === page;\n\n  return { results, totalPages, total, reachedEnd, page };\n};\n\nexport const getMovieDetailsById = async ({ movieId }) => {\n  const { data } = await axios.get(`movie/${movieId}`, {\n    params: {\n      language: 'en-US',\n    },\n  });\n\n  return data;\n};\n\nexport const getCast = async ({ movieId }) => {\n  const { data } = await axios.get(`movie/${movieId}/credits`, {\n    params: {\n      language: 'en-US',\n    },\n  });\n\n  console.log(data);\n\n  return data;\n};\n\nexport const getReviews = async ({ movieId, page }) => {\n  const { data } = await axios.get(`movie/${movieId}/reviews`, {\n    params: {\n      language: 'en-US',\n      page,\n    },\n  });\n\n  const { results, total_pages: totalPages, total_results: total } = data;\n  const reachedEnd = totalPages === page;\n\n  return { results, totalPages, total, reachedEnd, page };\n};\n"],"names":["MessageStyled","styled","colors","children","ReviewsStyled","movieId","useParams","useState","page","setPage","getMovieReviews","useCallback","getReviews","useFetchPages","data","status","reviews","results","totalPages","reachedEnd","console","log","lenth","map","index","id","author","content","className","Message","fetchStatus","type","onClick","useFetch","callback","isInitialRequest","setData","setStatus","useEffect","fetchData","toast","message","prev","undefined","length","axios","api_key","theMovieDBApiKey","findMoviesByQuery","query","params","total_pages","total","total_results","getTrandingMovies","filter","getMovieDetailsById","language","getCast"],"sourceRoot":""}