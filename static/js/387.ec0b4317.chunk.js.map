{"version":3,"file":"static/js/387.ec0b4317.chunk.js","mappings":"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","sources":["components/Message/Message.styled.jsx","components/Message/Message.jsx","components/Reviews/Reviews.styled.jsx","components/Reviews/Reviews.jsx","hooks/useFetch.js","services/movies.service.js"],"sourcesContent":["import styled from '@emotion/styled';\nimport { colors } from 'constants';\n\nexport const MessageStyled = styled.div`\n  display: flex;\n  justify-content: center;\n  margin-top: 30px;\n\n  & div {\n    color: #ffffffb3;\n    border-radius: 5px;\n    padding: 7px 24px 7px 24px;\n    border-left: 2px solid ${colors.color2};\n    border-right: 2px solid ${colors.color2};\n    font-size: 18px;\n    background-image: repeating-linear-gradient(\n      135deg,\n      rgb(0 0 0 / 0.01),\n      rgb(0 0 0 / 0.01) 5px,\n      rgba(255, 234, 0, 0.134) 5px,\n      rgba(255, 255, 255, 0) 10px\n    );\n  }\n`;\n","import { MessageStyled } from './Message.styled';\n\nconst Message = ({ children }) => {\n  return (\n    <MessageStyled>\n      <div>{children}</div>\n    </MessageStyled>\n  );\n};\n\nexport default Message;\n","import styled from '@emotion/styled';\nimport { colors } from 'constants';\n\nexport const ReviewsStyled = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n  margin-top: 30px;\n\n  & li {\n    & .author {\n      font-size: 20px;\n      font-weight: 500;\n      margin-bottom: 10px;\n      color: #fff;\n    }\n\n    & .date {\n      font-size: 16px;\n      font-weight: 400;\n      margin-bottom: 10px;\n      color: ${colors.color1};\n    }\n\n    & .content {\n      font-size: 16px;\n      font-weight: 400;\n      color: #ffffff97;\n      line-height: 1.6;\n      word-break: break-word;\n    }\n  }\n`;\n","import { ReviewsStyled } from './Reviews.styled';\nimport { useParams } from 'react-router-dom';\nimport { useFetchPages } from './../../hooks/useFetch';\nimport { useCallback, useState } from 'react';\nimport { getReviews } from 'services';\nimport { fetchStatus } from './../../constants/fetch.status';\nimport { Button } from './../Styled/Button.styled';\nimport Message from 'components/Message/Message';\nimport { Loader } from 'components/Styled';\n\nconst Reviews = () => {\n  const { movieId } = useParams();\n  const [page, setPage] = useState(1);\n\n  const getMovieReviews = useCallback(async () => {\n    return await getReviews({ movieId, page });\n  }, [movieId, page]);\n\n  const { data, status } = useFetchPages(getMovieReviews, page === 1);\n\n  const { results: reviews, totalPages, reachedEnd } = data;\n\n  const loadMore = () => {\n    setPage(page + 1);\n  };\n\n  console.log(data);\n\n  return (\n    <>\n      {reviews && reviews.length && (\n        <ReviewsStyled>\n          {reviews.map(({ id, author, content, updated_at }, index) => (\n            <li key={index}>\n              <div className=\"author\">{author}</div>\n              <div className=\"date\">{updated_at.slice(0, 10)}</div>\n              <div className=\"content\">{content}</div>\n            </li>\n          ))}\n        </ReviewsStyled>\n      )}\n\n      {reviews && !reviews.length && (\n        <Message>We don't have any reviews for this movie</Message>\n      )}\n\n      {status === fetchStatus.LOADING && <Loader className=\"pending\" />}\n\n      {totalPages > 1 && !reachedEnd && status !== fetchStatus.LOADING && (\n        <Button type=\"button\" onClick={loadMore}>\n          Load more\n        </Button>\n      )}\n    </>\n  );\n};\n\nexport default Reviews;\n","import { fetchStatus } from 'constants';\nimport { useEffect, useState } from 'react';\nimport { toast } from 'react-toastify';\n\nexport const useFetch = (callback, isInitialRequest) => {\n  const [data, setData] = useState({});\n  const [status, setStatus] = useState(fetchStatus.IDLE);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setStatus(fetchStatus.LOADING);\n      try {\n        const data = await callback();\n        setData(data);\n        setStatus(fetchStatus.SUCCESS);\n      } catch (error) {\n        toast.error(error.message);\n        setStatus(fetchStatus.ERROR);\n      }\n    };\n\n    fetchData();\n  }, [callback, isInitialRequest]);\n\n  return { data, status };\n};\n\nexport const useFetchPages = (callback, isInitialRequest) => {\n  const [data, setData] = useState({});\n  const [status, setStatus] = useState(fetchStatus.IDLE);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setStatus(fetchStatus.LOADING);\n      try {\n        const data = await callback();\n        setData(prev =>\n          isInitialRequest\n            ? data\n            : { ...prev, results: [...prev.results, ...data.results] }\n        );\n        if (\n          data.results !== undefined &&\n          data.results.length !== 0 &&\n          data.page === 1\n        ) {\n          // toast.success(`We found ${data.total} movies`);\n        }\n        setStatus(fetchStatus.SUCCESS);\n      } catch (error) {\n        toast.error(error.message);\n        setStatus(fetchStatus.ERROR);\n      }\n    };\n\n    fetchData();\n  }, [callback, isInitialRequest]);\n\n  return { data, status };\n};\n","import axios from 'axios';\nimport { theMovieDBApiKey } from 'constants';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3/';\naxios.defaults.params = {\n  api_key: theMovieDBApiKey,\n};\n\nexport const findMoviesByQuery = async ({ query, page }) => {\n  const { data } = await axios.get('search/movie', {\n    params: {\n      query,\n      page,\n    },\n  });\n\n  const { results, total_pages: totalPages, total_results: total } = data;\n  const reachedEnd = totalPages === page;\n\n  return { results, totalPages, total, reachedEnd, page };\n};\n\nexport const getTrandingMovies = async ({ page, filter }) => {\n  const { data } = await axios.get(`trending/movie/${filter}`, {\n    params: {\n      page,\n    },\n  });\n\n  const { results, total_pages: totalPages, total_results: total } = data;\n  const reachedEnd = totalPages === page;\n\n  return { results, totalPages, total, reachedEnd, page };\n};\n\nexport const getMovieDetailsById = async ({ movieId }) => {\n  const { data } = await axios.get(`movie/${movieId}`, {\n    params: {\n      language: 'en-US',\n    },\n  });\n\n  return data;\n};\n\nexport const getCast = async ({ movieId }) => {\n  const { data } = await axios.get(`movie/${movieId}/credits`, {\n    params: {\n      language: 'en-US',\n    },\n  });\n\n  return data;\n};\n\nexport const getReviews = async ({ movieId, page }) => {\n  const { data } = await axios.get(`movie/${movieId}/reviews`, {\n    params: {\n      language: 'en-US',\n      page,\n    },\n  });\n\n  const { results, total_pages: totalPages, total_results: total } = data;\n  const reachedEnd = totalPages === page;\n\n  return { results, totalPages, total, reachedEnd, page };\n};\n"],"names":["MessageStyled","styled","colors","children","ReviewsStyled","movieId","useParams","useState","page","setPage","getMovieReviews","useCallback","getReviews","useFetchPages","data","status","reviews","results","totalPages","reachedEnd","console","log","length","map","index","id","author","content","updated_at","className","slice","Message","fetchStatus","type","onClick","useFetch","callback","isInitialRequest","setData","setStatus","useEffect","fetchData","toast","message","prev","undefined","axios","api_key","theMovieDBApiKey","findMoviesByQuery","query","params","total_pages","total","total_results","getTrandingMovies","filter","getMovieDetailsById","language","getCast"],"sourceRoot":""}